<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1287px" preserveAspectRatio="none" style="width:1672px;height:1287px;background:#FFFFFF;" version="1.1" viewBox="0 0 1672 1287" width="1672px" zoomAndPan="magnify"><defs><filter height="300%" id="fn8sxq30ympmx" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="446.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="920" y="270.3594"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="247.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="920" y="891.9531"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="145.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1141" y="299.4922"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="145.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1141" y="542.3594"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="145.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1141" y="950.2188"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1362" y="328.625"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1362" y="571.4922"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1362" y="979.3516"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1583" y="357.7578"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1583" y="600.625"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1583" y="1008.4844"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="878.7891" style="stroke:#000000;stroke-width:2.0;" width="1648" x="10" y="232.0938"/><rect fill="#FFFFFF" height="657.7266" style="stroke:none;stroke-width:1.0;" width="1648" x="10" y="453.1563"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="628.9219" style="stroke:#000000;stroke-width:2.0;" width="1628" x="20" y="474.9609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="61" x2="61" y1="40.2969" y2="1244.4141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="241" x2="241" y1="40.2969" y2="1244.4141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="423.5" x2="423.5" y1="40.2969" y2="1244.4141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="671.5" x2="671.5" y1="40.2969" y2="1244.4141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="925" x2="925" y1="40.2969" y2="1244.4141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1145.5" x2="1145.5" y1="40.2969" y2="1244.4141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1367" x2="1367" y1="40.2969" y2="1244.4141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1588" x2="1588" y1="40.2969" y2="1244.4141"/><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="30" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="37" y="24.9951">Player</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="30" y="1243.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="37" y="1263.4092">Player</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="36" x="221" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="228" y="24.9951">CLI</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="36" x="221" y="1243.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="228" y="1263.4092">CLI</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="57" x="393.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="400.5" y="24.9951">Client</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="57" x="393.5" y="1243.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="400.5" y="1263.4092">Client</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="61" x="639.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="646.5" y="24.9951">Server</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="61" x="639.5" y="1243.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="646.5" y="1263.4092">Server</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="56" x="895" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="902" y="24.9951">Game</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="56" x="895" y="1243.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="902" y="1263.4092">Game</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="87" x="1100.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1107.5" y="24.9951">Controller</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="87" x="1100.5" y="1243.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1107.5" y="1263.4092">Controller</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="134" x="1298" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="1305" y="24.9951">ActionController</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="134" x="1298" y="1243.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="1305" y="1263.4092">ActionController</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="96" x="1538" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1545" y="24.9951">GameTable</text><rect fill="#FEFECE" filter="url(#fn8sxq30ympmx)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="96" x="1538" y="1243.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1545" y="1263.4092">GameTable</text><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="446.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="920" y="270.3594"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="247.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="920" y="891.9531"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="145.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1141" y="299.4922"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="145.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1141" y="542.3594"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="145.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1141" y="950.2188"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1362" y="328.625"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1362" y="571.4922"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1362" y="979.3516"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1583" y="357.7578"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1583" y="600.625"/><rect fill="#FFFFFF" filter="url(#fn8sxq30ympmx)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1583" y="1008.4844"/><polygon fill="#A80036" points="229,67.4297,239,71.4297,229,75.4297,233,71.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="61" x2="235" y1="71.4297" y2="71.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="68" y="66.3638">"market"</text><polygon fill="#A80036" points="72,96.5625,62,100.5625,72,104.5625,68,100.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="66" x2="240" y1="100.5625" y2="100.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="78" y="95.4966">printMarket()</text><polygon fill="#A80036" points="72,125.6953,62,129.6953,72,133.6953,68,129.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="66" x2="240" y1="129.6953" y2="129.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="78" y="124.6294">askMarketChoice()</text><polygon fill="#A80036" points="229,154.8281,239,158.8281,229,162.8281,233,158.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="61" x2="235" y1="158.8281" y2="158.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="68" y="153.7622">Row/Column, Number</text><polygon fill="#A80036" points="412,183.9609,422,187.9609,412,191.9609,416,187.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241" x2="418" y1="187.9609" y2="187.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="248" y="182.895">sendMarketChoice()</text><polygon fill="#A80036" points="660,213.0938,670,217.0938,660,221.0938,664,217.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="424" x2="666" y1="217.0938" y2="217.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="431" y="212.0278">RequestUseMarket()</text><path d="M10,232.0938 L76,232.0938 L76,239.0938 L66,249.0938 L10,249.0938 L10,232.0938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="878.7891" style="stroke:#000000;stroke-width:2.0;" width="1648" x="10" y="232.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="245.1606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="167" x="91" y="244.3042">[tryAddMarbles() == null]</text><polygon fill="#A80036" points="908,266.3594,918,270.3594,908,274.3594,912,270.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="672" x2="914" y1="270.3594" y2="270.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="679" y="265.2935">useMarket()</text><polygon fill="#A80036" points="1129,295.4922,1139,299.4922,1129,303.4922,1133,299.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="930" x2="1135" y1="299.4922" y2="299.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="937" y="294.4263">useMarket()</text><polygon fill="#A80036" points="1350,324.625,1360,328.625,1350,332.625,1354,328.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1151" x2="1356" y1="328.625" y2="328.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="1158" y="323.5591">useMarket()</text><polygon fill="#A80036" points="1571,353.7578,1581,357.7578,1571,361.7578,1575,357.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1372" x2="1577" y1="357.7578" y2="357.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="1379" y="352.6919">tryAddMarbles()</text><polygon fill="#A80036" points="1383,382.8906,1373,386.8906,1383,390.8906,1379,386.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1377" x2="1587" y1="386.8906" y2="386.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="1389" y="381.8247">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="1162,412.0234,1152,416.0234,1162,420.0234,1158,416.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1156" x2="1366" y1="416.0234" y2="416.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="1168" y="410.9575">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="941,441.1563,931,445.1563,941,449.1563,937,445.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="935" x2="1145" y1="445.1563" y2="445.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="947" y="440.0903">HashMap&lt;Resource,Integer&gt;</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1658" y1="454.1563" y2="454.1563"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="164" x="15" y="464.3667">[tryAddMarbles() != null]</text><path d="M20,474.9609 L98,474.9609 L98,481.9609 L88,491.9609 L20,491.9609 L20,474.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="628.9219" style="stroke:#000000;stroke-width:2.0;" width="1628" x="20" y="474.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="35" y="488.0278">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="202" x="113" y="487.1714">[until tryAddMarbles() == null]</text><polygon fill="#A80036" points="908,509.2266,918,513.2266,908,517.2266,912,513.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="672" x2="914" y1="513.2266" y2="513.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="679" y="508.1606">useMarket()</text><polygon fill="#A80036" points="1129,538.3594,1139,542.3594,1129,546.3594,1133,542.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="930" x2="1135" y1="542.3594" y2="542.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="937" y="537.2935">useMarket()</text><polygon fill="#A80036" points="1350,567.4922,1360,571.4922,1350,575.4922,1354,571.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1151" x2="1356" y1="571.4922" y2="571.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="1158" y="566.4263">useMarket()</text><polygon fill="#A80036" points="1571,596.625,1581,600.625,1571,604.625,1575,600.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1372" x2="1577" y1="600.625" y2="600.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="1379" y="595.5591">tryAddMarbles()</text><polygon fill="#A80036" points="1383,625.7578,1373,629.7578,1383,633.7578,1379,629.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1377" x2="1587" y1="629.7578" y2="629.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="1389" y="624.6919">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="1162,654.8906,1152,658.8906,1162,662.8906,1158,658.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1156" x2="1366" y1="658.8906" y2="658.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="1168" y="653.8247">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="941,684.0234,931,688.0234,941,692.0234,937,688.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="935" x2="1145" y1="688.0234" y2="688.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="947" y="682.9575">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="683,713.1563,673,717.1563,683,721.1563,679,717.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="677" x2="924" y1="717.1563" y2="717.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="689" y="712.0903">ResponseDiscardResourceMarket()</text><polygon fill="#A80036" points="435,742.2891,425,746.2891,435,750.2891,431,746.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="429" x2="671" y1="746.2891" y2="746.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="441" y="741.2231">ResponseDiscardResourceMarket()</text><polygon fill="#A80036" points="252,771.4219,242,775.4219,252,779.4219,248,775.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="246" x2="423" y1="775.4219" y2="775.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="258" y="770.356">askResourceToDiscard()</text><polygon fill="#A80036" points="72,800.5547,62,804.5547,72,808.5547,68,804.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="66" x2="240" y1="804.5547" y2="804.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="78" y="799.4888">askResourceToDiscard()</text><polygon fill="#A80036" points="229,829.6875,239,833.6875,229,837.6875,233,833.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="61" x2="235" y1="833.6875" y2="833.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="68" y="828.6216">Resource</text><polygon fill="#A80036" points="412,858.8203,422,862.8203,412,866.8203,416,862.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241" x2="418" y1="862.8203" y2="862.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="248" y="857.7544">sendResourceSelection()</text><polygon fill="#A80036" points="660,887.9531,670,891.9531,660,895.9531,664,891.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="424" x2="666" y1="891.9531" y2="891.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="431" y="886.8872">RequestAddResourceSelection()</text><polygon fill="#A80036" points="908,917.0859,918,921.0859,908,925.0859,912,921.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="672" x2="914" y1="921.0859" y2="921.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="679" y="916.02">discardResources()</text><polygon fill="#A80036" points="1129,946.2188,1139,950.2188,1129,954.2188,1133,950.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="930" x2="1135" y1="950.2188" y2="950.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="937" y="945.1528">discardResource()</text><polygon fill="#A80036" points="1350,975.3516,1360,979.3516,1350,983.3516,1354,979.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1151" x2="1356" y1="979.3516" y2="979.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1158" y="974.2856">discardResource()</text><polygon fill="#A80036" points="1571,1004.4844,1581,1008.4844,1571,1012.4844,1575,1008.4844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1372" x2="1577" y1="1008.4844" y2="1008.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="1379" y="1003.4185">tryAddMarbles()</text><polygon fill="#A80036" points="1383,1033.6172,1373,1037.6172,1383,1041.6172,1379,1037.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1377" x2="1587" y1="1037.6172" y2="1037.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="1389" y="1032.5513">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="1162,1062.75,1152,1066.75,1162,1070.75,1158,1066.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1156" x2="1366" y1="1066.75" y2="1066.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="1168" y="1061.6841">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="941,1091.8828,931,1095.8828,941,1099.8828,937,1095.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="935" x2="1145" y1="1095.8828" y2="1095.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="947" y="1090.8169">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="683,1135.0156,673,1139.0156,683,1143.0156,679,1139.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="677" x2="924" y1="1139.0156" y2="1139.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="689" y="1133.9497">ResponseSuccess()</text><polygon fill="#A80036" points="435,1164.1484,425,1168.1484,435,1172.1484,431,1168.1484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="429" x2="671" y1="1168.1484" y2="1168.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="441" y="1163.0825">ResponseSuccess()</text><polygon fill="#A80036" points="252,1193.2813,242,1197.2813,252,1201.2813,248,1197.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="246" x2="423" y1="1197.2813" y2="1197.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="258" y="1192.2153">success()</text><polygon fill="#A80036" points="72,1222.4141,62,1226.4141,72,1230.4141,68,1226.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="66" x2="240" y1="1226.4141" y2="1226.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="78" y="1221.3481">displaySuccess()</text><!--MD5=[436a8f54c213bcdf9b28ff21a019ada0]
@startuml
Player -> CLI: "market"
Player <- CLI: printMarket()
Player <- CLI: askMarketChoice()
Player -> CLI: Row/Column, Number
CLI -> Client: sendMarketChoice()

Client-> Server: RequestUseMarket()



alt tryAddMarbles() == null
            Server-> Game: useMarket()
             activate Game

            Game-> Controller: useMarket()
            activate Controller
            Controller-> ActionController: useMarket()
            activate ActionController
            ActionController-> GameTable: tryAddMarbles()
            activate GameTable
            ActionController<- GameTable: HashMap<Resource,Integer>
            deactivate GameTable
            ActionController -> Controller: HashMap<Resource,Integer>
            deactivate ActionController
            Controller -> Game: HashMap<Resource,Integer>
            deactivate Controller



else tryAddMarbles() != null
        loop until tryAddMarbles() == null
            Server-> Game: useMarket()

            Game-> Controller: useMarket()
            activate Controller
            Controller-> ActionController: useMarket()
            activate ActionController
            ActionController-> GameTable: tryAddMarbles()
            activate GameTable
            ActionController<- GameTable: HashMap<Resource,Integer>
            deactivate GameTable
            ActionController -> Controller: HashMap<Resource,Integer>
            deactivate ActionController
            Controller -> Game: HashMap<Resource,Integer>
            deactivate Controller

            Game->Server: ResponseDiscardResourceMarket()
            deactivate Game
            Client<- Server: ResponseDiscardResourceMarket()
            CLI<-Client: askResourceToDiscard()
            Player <- CLI: askResourceToDiscard()
            Player -> CLI: Resource
            CLI->Client: sendResourceSelection()
            Client-> Server: RequestAddResourceSelection()
            activate Game
            Server-> Game: discardResources()


            Game-> Controller: discardResource()
            activate Controller
            Controller-> ActionController: discardResource()
            activate ActionController
            ActionController-> GameTable: tryAddMarbles()
            activate GameTable
            ActionController<- GameTable: HashMap<Resource,Integer>
            deactivate GameTable
            ActionController -> Controller: HashMap<Resource,Integer>
            deactivate ActionController
            Controller -> Game: HashMap<Resource,Integer>
            deactivate Controller


        end
end
Server<- - Game: ResponseSuccess()

deactivate Game

Client<- - Server: ResponseSuccess()

CLI <- - Client: success()

Player <- - CLI: displaySuccess()
@enduml

PlantUML version 1.2021.8beta3(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>