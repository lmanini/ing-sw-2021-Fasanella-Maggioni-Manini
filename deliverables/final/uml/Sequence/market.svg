<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1260px" preserveAspectRatio="none" style="width:1646px;height:1260px;background:#FFFFFF;" version="1.1" viewBox="0 0 1646 1260" width="1646px" zoomAndPan="magnify"><defs><filter height="300%" id="f1se3j66fixtcu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="354.6349" style="stroke:#A80036;stroke-width:1.0;" width="10" x="879" y="294.3539"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="247.208" style="stroke:#A80036;stroke-width:1.0;" width="10" x="879" y="823.8948"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="169.906" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1105" y="323.5049"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="145.755" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1105" y="882.1968"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="111.604" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1331" y="352.6559"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="87.453" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1331" y="911.3478"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="53.302" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1557" y="381.8069"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="29.151" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1557" y="940.4988"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="646.1449" style="stroke:#000000;stroke-width:2.0;" width="1622.5" x="10" y="396.8069"/><rect fill="#FFFFFF" height="541.5409" style="stroke:none;stroke-width:1.0;" width="1622.5" x="10" y="501.4109"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="512.718" style="stroke:#000000;stroke-width:2.0;" width="1602.5" x="20" y="523.2338"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="55" x2="55" y1="88.2969" y2="1176.5558"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="237" x2="237" y1="88.2969" y2="1176.5558"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="421.5" x2="421.5" y1="88.2969" y2="1176.5558"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="662.5" x2="662.5" y1="88.2969" y2="1176.5558"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="883.5" x2="883.5" y1="88.2969" y2="1176.5558"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1109.5" x2="1109.5" y1="88.2969" y2="1176.5558"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1336" x2="1336" y1="88.2969" y2="1176.5558"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1561.5" x2="1561.5" y1="88.2969" y2="1176.5558"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="30" y="84.9951">Player</text><ellipse cx="55" cy="15" fill="#FEFECE" filter="url(#f1se3j66fixtcu)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M55,23 L55,50 M42,31 L68,31 M55,50 L42,65 M55,50 L68,65 " fill="none" filter="url(#f1se3j66fixtcu)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="30" y="1188.5509">Player</text><ellipse cx="55" cy="1201.8527" fill="#FEFECE" filter="url(#f1se3j66fixtcu)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M55,1209.8527 L55,1236.8527 M42,1217.8527 L68,1217.8527 M55,1236.8527 L42,1251.8527 M55,1236.8527 L68,1251.8527 " fill="none" filter="url(#f1se3j66fixtcu)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="36" x="217" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="224" y="72.9951">CLI</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="36" x="217" y="1175.5558"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="224" y="1195.5509">CLI</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="55" x="392.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="399.5" y="72.9951">Client</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="55" x="392.5" y="1175.5558"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="399.5" y="1195.5509">Client</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="61" x="630.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="637.5" y="72.9951">Server</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="61" x="630.5" y="1175.5558"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="637.5" y="1195.5509">Server</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="57" x="853.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="860.5" y="72.9951">Game</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="57" x="853.5" y="1175.5558"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="860.5" y="1195.5509">Game</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="85" x="1065.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1072.5" y="72.9951">Controller</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="85" x="1065.5" y="1175.5558"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1072.5" y="1195.5509">Controller</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="130" x="1269" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1276" y="72.9951">ActionController</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="130" x="1269" y="1175.5558"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1276" y="1195.5509">ActionController</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="1511.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1518.5" y="72.9951">GameTable</text><rect fill="#FEFECE" filter="url(#f1se3j66fixtcu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="1511.5" y="1175.5558"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1518.5" y="1195.5509">GameTable</text><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="354.6349" style="stroke:#A80036;stroke-width:1.0;" width="10" x="879" y="294.3539"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="247.208" style="stroke:#A80036;stroke-width:1.0;" width="10" x="879" y="823.8948"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="169.906" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1105" y="323.5049"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="145.755" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1105" y="882.1968"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="111.604" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1331" y="352.6559"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="87.453" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1331" y="911.3478"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="53.302" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1557" y="381.8069"/><rect fill="#FFFFFF" filter="url(#f1se3j66fixtcu)" height="29.151" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1557" y="940.4988"/><polygon fill="#A80036" points="225,115.4479,235,119.4479,225,123.4479,229,119.4479" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="55" x2="231" y1="119.4479" y2="119.4479"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="62" y="114.3783">"buy resource"</text><polygon fill="#A80036" points="66,144.5989,56,148.5989,66,152.5989,62,148.5989" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="60" x2="236" y1="148.5989" y2="148.5989"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="72" y="143.5293">printMarket()</text><polygon fill="#A80036" points="66,173.7499,56,177.7499,66,181.7499,62,177.7499" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="60" x2="236" y1="177.7499" y2="177.7499"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="72" y="172.6803">askMarketChoice()</text><polygon fill="#A80036" points="225,202.9009,235,206.9009,225,210.9009,229,206.9009" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="55" x2="231" y1="206.9009" y2="206.9009"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="62" y="201.8313">Row/Column, Number</text><polygon fill="#A80036" points="410,232.0519,420,236.0519,410,240.0519,414,236.0519" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="237" x2="416" y1="236.0519" y2="236.0519"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="244" y="230.9823">sendMarketChoice()</text><polygon fill="#A80036" points="651,261.2029,661,265.2029,651,269.2029,655,265.2029" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="422" x2="657" y1="265.2029" y2="265.2029"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="429" y="260.1333">RequestUseMarket</text><polygon fill="#A80036" points="867,290.3539,877,294.3539,867,298.3539,871,294.3539" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="663" x2="873" y1="294.3539" y2="294.3539"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="670" y="289.2843">useMarket()</text><polygon fill="#A80036" points="1093,319.5049,1103,323.5049,1093,327.5049,1097,323.5049" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="889" x2="1099" y1="323.5049" y2="323.5049"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="896" y="318.4353">useMarket()</text><polygon fill="#A80036" points="1319,348.6559,1329,352.6559,1319,356.6559,1323,352.6559" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1115" x2="1325" y1="352.6559" y2="352.6559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1122" y="347.5863">useMarket()</text><polygon fill="#A80036" points="1545,377.8069,1555,381.8069,1545,385.8069,1549,381.8069" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1341" x2="1551" y1="381.8069" y2="381.8069"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="1348" y="376.7373">tryAddMarbles()</text><path d="M10,396.8069 L74,396.8069 L74,403.8069 L64,413.8069 L10,413.8069 L10,396.8069 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="646.1449" style="stroke:#000000;stroke-width:2.0;" width="1622.5" x="10" y="396.8069"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="409.8883">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="161" x="89" y="409.0318">[tryAddMarbles() == null]</text><polygon fill="#A80036" points="1352,431.1089,1342,435.1089,1352,439.1089,1348,435.1089" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1346" x2="1561" y1="435.1089" y2="435.1089"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="1358" y="430.0393">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="1126,460.2599,1116,464.2599,1126,468.2599,1122,464.2599" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1120" x2="1335" y1="464.2599" y2="464.2599"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="1132" y="459.1903">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="900,489.4109,890,493.4109,900,497.4109,896,493.4109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="894" x2="1109" y1="493.4109" y2="493.4109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="906" y="488.3413">HashMap&lt;Resource,Integer&gt;</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1632.5" y1="502.4109" y2="502.4109"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="157" x="15" y="512.6358">[tryAddMarbles() != null]</text><path d="M20,523.2338 L96,523.2338 L96,530.2338 L86,540.2338 L20,540.2338 L20,523.2338 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="512.718" style="stroke:#000000;stroke-width:2.0;" width="1602.5" x="20" y="523.2338"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="35" y="536.3152">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="194" x="111" y="535.4587">[until tryAddMarbles() == null]</text><polygon fill="#A80036" points="1347,557.5358,1337,561.5358,1347,565.5358,1343,561.5358" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1341" x2="1561" y1="561.5358" y2="561.5358"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="1353" y="556.4662">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="1121,586.6868,1111,590.6868,1121,594.6868,1117,590.6868" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1115" x2="1335" y1="590.6868" y2="590.6868"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="1127" y="585.6172">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="900,615.8378,890,619.8378,900,623.8378,896,619.8378" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="894" x2="1109" y1="619.8378" y2="619.8378"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="906" y="614.7682">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="674,644.9888,664,648.9888,674,652.9888,670,648.9888" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="668" x2="883" y1="648.9888" y2="648.9888"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="680" y="643.9192">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="433,674.1398,423,678.1398,433,682.1398,429,678.1398" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="427" x2="662" y1="678.1398" y2="678.1398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="439" y="673.0702">ResponseDiscardResourceMarket</text><polygon fill="#A80036" points="248,703.2908,238,707.2908,248,711.2908,244,707.2908" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="242" x2="421" y1="707.2908" y2="707.2908"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="254" y="702.2212">askResourceToDiscard()</text><polygon fill="#A80036" points="66,732.4418,56,736.4418,66,740.4418,62,736.4418" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="60" x2="236" y1="736.4418" y2="736.4418"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="72" y="731.3722">askResourceToDiscard()</text><polygon fill="#A80036" points="225,761.5928,235,765.5928,225,769.5928,229,765.5928" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="55" x2="231" y1="765.5928" y2="765.5928"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="62" y="760.5232">Resource</text><polygon fill="#A80036" points="410,790.7438,420,794.7438,410,798.7438,414,794.7438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="237" x2="416" y1="794.7438" y2="794.7438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="244" y="789.6742">sendResourceSelection()</text><polygon fill="#A80036" points="651,819.8948,661,823.8948,651,827.8948,655,823.8948" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="422" x2="657" y1="823.8948" y2="823.8948"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="429" y="818.8252">RequestAddResourceSelection</text><polygon fill="#A80036" points="867,849.0458,877,853.0458,867,857.0458,871,853.0458" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="663" x2="873" y1="853.0458" y2="853.0458"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="670" y="847.9762">discardResources()</text><polygon fill="#A80036" points="1093,878.1968,1103,882.1968,1093,886.1968,1097,882.1968" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="889" x2="1099" y1="882.1968" y2="882.1968"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="896" y="877.1272">discardResource()</text><polygon fill="#A80036" points="1319,907.3478,1329,911.3478,1319,915.3478,1323,911.3478" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1115" x2="1325" y1="911.3478" y2="911.3478"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="1122" y="906.2782">discardResource()</text><polygon fill="#A80036" points="1545,936.4988,1555,940.4988,1545,944.4988,1549,940.4988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1341" x2="1551" y1="940.4988" y2="940.4988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="1348" y="935.4292">tryAddMarbles()</text><polygon fill="#A80036" points="1352,965.6498,1342,969.6498,1352,973.6498,1348,969.6498" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1346" x2="1561" y1="969.6498" y2="969.6498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="1358" y="964.5802">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="1126,994.8008,1116,998.8008,1126,1002.8008,1122,998.8008" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1120" x2="1335" y1="998.8008" y2="998.8008"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="1132" y="993.7312">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="900,1023.9518,890,1027.9518,900,1031.9518,896,1027.9518" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="894" x2="1109" y1="1027.9518" y2="1027.9518"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="906" y="1022.8822">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="674,1067.1028,664,1071.1028,674,1075.1028,670,1071.1028" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="668" x2="883" y1="1071.1028" y2="1071.1028"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="680" y="1066.0332">HashMap&lt;Resource,Integer&gt;</text><polygon fill="#A80036" points="433,1096.2538,423,1100.2538,433,1104.2538,429,1100.2538" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="427" x2="662" y1="1100.2538" y2="1100.2538"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="439" y="1095.1842">ResponseSuccess</text><polygon fill="#A80036" points="248,1125.4048,238,1129.4048,248,1133.4048,244,1129.4048" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="242" x2="421" y1="1129.4048" y2="1129.4048"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="254" y="1124.3352">success()</text><polygon fill="#A80036" points="66,1154.5558,56,1158.5558,66,1162.5558,62,1158.5558" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60" x2="236" y1="1158.5558" y2="1158.5558"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="72" y="1153.4862">displaySuccess()</text><!--MD5=[63a13d1272a796dab5089956c079baa2]
@startuml
actor Player as Player

Player -> CLI: "buy resource"
Player <- CLI: printMarket()
Player <- CLI: askMarketChoice()
Player -> CLI: Row/Column, Number
CLI -> Client: sendMarketChoice()

Client-> Server: RequestUseMarket


    Server-> Game: useMarket()
    activate Game
    Game-> Controller: useMarket()
    activate Controller
    Controller-> ActionController: useMarket()
    activate ActionController
    ActionController-> GameTable: tryAddMarbles()
    activate GameTable


alt tryAddMarbles() == null

            ActionController<- GameTable: HashMap<Resource,Integer>
            deactivate GameTable
            ActionController -> Controller: HashMap<Resource,Integer>
            deactivate ActionController
            Controller -> Game: HashMap<Resource,Integer>
            deactivate Controller



else tryAddMarbles() != null
        loop until tryAddMarbles() == null

            ActionController<- GameTable: HashMap<Resource,Integer>
            deactivate GameTable
            ActionController -> Controller: HashMap<Resource,Integer>
            deactivate ActionController
            Controller -> Game: HashMap<Resource,Integer>
            deactivate Controller

            Game->Server: HashMap<Resource,Integer>
            deactivate Game
            Client<- Server: ResponseDiscardResourceMarket
            CLI<-Client: askResourceToDiscard()
            Player <- CLI: askResourceToDiscard()
            Player -> CLI: Resource
            CLI->Client: sendResourceSelection()
            Client-> Server: RequestAddResourceSelection
            activate Game
            Server-> Game: discardResources()


            Game-> Controller: discardResource()
            activate Controller
            Controller-> ActionController: discardResource()
            activate ActionController
            ActionController-> GameTable: tryAddMarbles()
            activate GameTable
            ActionController<- GameTable: HashMap<Resource,Integer>
            deactivate GameTable
            ActionController -> Controller: HashMap<Resource,Integer>
            deactivate ActionController
            Controller -> Game: HashMap<Resource,Integer>
            deactivate Controller


        end
end
Server<- - Game: HashMap<Resource,Integer>

deactivate Game

Client<- - Server: ResponseSuccess

CLI <- - Client: success()

Player <- - CLI: displaySuccess()
@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>